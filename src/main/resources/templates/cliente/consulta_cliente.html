<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head th:replace="~{plantillas/principal :: head}"></head>
<style>
  .list-group-item {
    padding-top: 5px;
    padding-bottom: 5px;
  }
</style>

<body>
  <header th:replace="~{plantillas/principal :: header}"></header>
  <div class="container py-4">
    <div class="card bg-light">
      <div class="card-header">
        <h3 class="text-secondary" th:text="${titulo}"></h3>
      </div>
      <div class="card-body shadow-lg p-3">
        <h4 class="card-title text-end">
          <a th:href="@{/comercial/facturanueva/} + ${cliente.id}" title="facturar" 
            class="btn btn-outline-success btn-sm">facturar</a>&nbsp;
        </h4>

        <img th:if="${#strings.length(cliente.imagen) > 0}" th:src="@{/uploads/} + ${cliente.imagen}" style="max-width: 20%" 
          class="img-thumbnail rounded float-start"/>

        <ul class="list-group">
          <li class="list-group-item"><b>Tipo identificación: </b><i th:text="${cliente.tipoIdentificacion}"></i></li>
          <li class="list-group-item"><b>Identificación: </b><i th:text="${cliente.identificacion}"></i></li>
          <li class="list-group-item"><b>Teléfono: </b><i th:text="${cliente.telefono}"></i></li>
          <li class="list-group-item"><b>Dirección: </b><i th:text="${cliente.direccion}"></i></li>
          <li class="list-group-item"><b>Nombre completo: </b><i th:text="${cliente.nombreCompleto}"></i></li>
          <li class="list-group-item"><b>Fecha de ingreso: </b><i
              th:text="${#dates.format(cliente.fechaIngreso, 'dd/MM/yyyy')}"></i></li>
          <li class="list-group-item"><b>Correo electrónico: </b><i th:text="${cliente.correoElectronico}"></i></li>
          <li class="list-group-item"><b>Capacidad de crédito: $</b><i
              th:text="${#numbers.formatInteger(cliente.capacidadCredito, 1, 'COMMA')}"></i></li>
        </ul>

        <table th:if="${not #lists.isEmpty(cliente.facturas)}" 
          class="table table-striped table-bordered table-sm mt-4">
      
        <thead class="thead-dark">
          <tr>
            <th>Nro. Factura</th>
            <th>Descripción</th>
            <th>Fecha</th>
            <th>Subtotal</th>
            <th class="text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="fact : ${cliente.facturas}">
            <td th:text="${fact.nroFactura}"></td>
            <td th:text="${fact.descripcion}"></td>
            <td th:text="${fact.fechaVenta}"></td>
            <td th:text="${#numbers.formatDecimal(fact.subtotal, 0, 'COMMA', 1, 'POINT')}"></td>
            <td class="text-center">
              <a th:href="@{/comercial/facturaconsultar/} + ${fact.nroFactura}" title="consulta factura">
                <i class="bi-eye" style="color: mediumblue"></i></a>
              &nbsp;
              <a th:href="@{/comercial/facturaeliminar/} + ${fact.nroFactura}" 
                title="eliminar factura" onclick="return confirm('Está seguro de eliminar la factura')">
                <i class="bi-trash" style="color: indianred"></i></a>      
            </td>
          </tr>
        </tbody>
      </table>
      
      <div th:text="'No hay facturas para el cliente ' + ${cliente.nombreCompleto}"
        th:if="${#lists.isEmpty(cliente.facturas)}" class="alert alert-info mt-3">
      </div>
        
        <div class="text-right mt-3">
          <a th:href="@{/comercial/clienteslistar}" class="btn btn-sm btn-light">&laquo; regresar</a>
        </div>
      </div>
    </div>
  </div>
  <footer th:replace="~{plantillas/principal :: footer}"></footer>
</body>

</html>